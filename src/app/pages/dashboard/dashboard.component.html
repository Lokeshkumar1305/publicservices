<div class="dashboard-container p-4">
  <!-- Metrics Row -->
  <div class="row g-4 mb-4">
    <div class="col-md-2" *ngFor="let metric of metrics">
      <mat-card class="metric-card border-0 shadow-sm rounded-4 h-100 overflow-hidden">
        <div class="p-3">
          <div class="d-flex justify-content-between align-items-start mb-2">
            <span class="caption-bold text-muted">{{ metric.label }}</span>
            <div class="icon-box" [ngClass]="metric.color">
              <mat-icon>{{ metric.icon }}</mat-icon>
            </div>
          </div>
          <div class="h2-bold mb-1">{{ metric.value }}</div>
          <div class="caption-reg d-flex align-items-center gap-1"
            [ngClass]="metric.trendUp ? 'text-success' : 'text-muted'">
            <mat-icon *ngIf="metric.trend" style="font-size: 14px; width: 14px; height: 14px;">trending_up</mat-icon>
            {{ metric.trend || metric.subtext }}
          </div>
        </div>
      </mat-card>
    </div>
  </div>

  <!-- Main Grid: Chart and Recent Cases -->
  <div class="row g-4 mb-4">
    <!-- Revenue Chart -->
    <div class="col-md-8">
      <mat-card class="chart-card border-0 shadow-sm rounded-4 h-100 overflow-hidden p-4">
        <h3 class="title2-bold text-dark mb-4">Revenue Overview</h3>
        <div class="chart-container">
          <!-- Replicating the line chart with SVG for premium look without heavy dependencies -->
          <svg viewBox="0 0 800 300" class="revenue-chart">
            <!-- Grid Lines -->
            <line x1="0" y1="0" x2="800" y2="0" stroke="#f1f5f9" />
            <line x1="0" y1="75" x2="800" y2="75" stroke="#f1f5f9" />
            <line x1="0" y1="150" x2="800" y2="150" stroke="#f1f5f9" />
            <line x1="0" y1="225" x2="800" y2="225" stroke="#f1f5f9" />
            <line x1="0" y1="300" x2="800" y2="300" stroke="#e2e8f0" />

            <!-- Labels Y-Axis -->
            <text x="-10" y="5" class="chart-label" text-anchor="end">$3600</text>
            <text x="-10" y="80" class="chart-label" text-anchor="end">$2700</text>
            <text x="-10" y="155" class="chart-label" text-anchor="end">$1800</text>
            <text x="-10" y="230" class="chart-label" text-anchor="end">$900</text>
            <text x="-10" y="305" class="chart-label" text-anchor="end">$0</text>

            <!-- Chart Line Path -->
            <path d="M 0 300 L 100 300 L 200 300 L 300 300 L 400 300 L 500 300 L 600 280 Q 700 200 800 50" fill="none"
              stroke="#6366f1" stroke-width="3" stroke-linecap="round" />

            <!-- X-Axis Labels -->
            <text x="0" y="330" class="chart-label" text-anchor="middle">Sep</text>
            <text x="160" y="330" class="chart-label" text-anchor="middle">Oct</text>
            <text x="320" y="330" class="chart-label" text-anchor="middle">Nov</text>
            <text x="480" y="330" class="chart-label" text-anchor="middle">Dec</text>
            <text x="640" y="330" class="chart-label" text-anchor="middle">Jan</text>
            <text x="800" y="330" class="chart-label" text-anchor="middle">Feb</text>
          </svg>
        </div>
      </mat-card>
    </div>

    <!-- Recent Cases -->
    <div class="col-md-4">
      <mat-card class="border-0 shadow-sm rounded-4 h-100 overflow-hidden p-4">
        <h3 class="title2-bold text-dark mb-4">Recent Cases</h3>
        <div class="list-container d-flex flex-column gap-3">
          <div *ngFor="let c of recentCases"
            class="d-flex justify-content-between align-items-center p-2 rounded-3 hover-bg transition">
            <div>
              <div class="body-bold text-dark mb-1">{{ c.title }}</div>
              <div class="caption-reg text-muted">{{ c.subtitle }}</div>
            </div>
            <span class="badge status-badge" [ngClass]="getStatusClass(c.status)">{{ c.status }}</span>
          </div>
        </div>
      </mat-card>
    </div>
  </div>

  <!-- Bottom Row: Bookings and Invoices -->
  <div class="row g-4">
    <!-- Recent Bookings -->
    <div class="col-md-6">
      <mat-card class="border-0 shadow-sm rounded-4 h-100 overflow-hidden p-4">
        <h3 class="title2-bold text-dark mb-4">Recent Bookings</h3>
        <div class="list-container d-flex flex-column gap-3">
          <div *ngFor="let b of recentBookings"
            class="d-flex justify-content-between align-items-center p-2 rounded-3 hover-bg transition">
            <div>
              <div class="body-bold text-dark mb-1">{{ b.client }}</div>
              <div class="caption-reg text-muted">{{ b.subtitle }}</div>
            </div>
            <span class="badge status-badge" [ngClass]="getStatusClass(b.status)">{{ b.status }}</span>
          </div>
        </div>
      </mat-card>
    </div>

    <!-- Recent Invoices -->
    <div class="col-md-6">
      <mat-card class="border-0 shadow-sm rounded-4 h-100 overflow-hidden p-4">
        <h3 class="title2-bold text-dark mb-4">Recent Invoices</h3>
        <div class="list-container d-flex flex-column gap-3">
          <div *ngFor="let i of recentInvoices"
            class="d-flex justify-content-between align-items-center p-2 rounded-3 hover-bg transition">
            <div>
              <div class="body-bold text-dark mb-1">{{ i.client }}</div>
              <div class="caption-reg text-muted">{{ i.subtitle }}</div>
            </div>
            <span class="badge status-badge" [ngClass]="getStatusClass(i.status)">{{ i.status }}</span>
          </div>
        </div>
      </mat-card>
    </div>
  </div>
</div>